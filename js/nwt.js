(function(){function NWT(){}function NWTIOResponse(a){this.request=a;try{this.obj=JSON.parse(a.responseText)}catch(b){}}function NWTIO(a){this.req=new XMLHttpRequest,this.config={},this.url=a[0],this.ioData="";var b=["success","failure","serialize"],c,d,e=this,f=function(a){return function(b){return e.config[a]=b,this}};for(c=0,d;d=b[c];c++)this[d]=f(d)}function NWTNodeInstance(a){nwt.implement("DelayableQueue",this),this._node=a}function NWTNode(){}function NWTNodeList(a){function g(a){return function(){for(var b=0,c;c=f.nodes[b];b++)c[a].apply(c,arguments)}}var b=[];for(var c=0,d;d=a[c];c++)b.push(new NWTNodeInstance(d));this.nodes=b;var e=["remove","addClass","removeClass","setStyle","setStyles","removeStyle","removeStyles","plug"],f=this;for(var c=0,h;h=e[c];c++)this[h]=g(h)}function NWTAnimate(){this.animClass="nwt-anim-on"}function NWTEventInstance(a,b){this._e=a,this.target=new NWTNodeInstance(a.target);for(var c in b)this[c]=b[c]}function NWTEvent(){this._cached={},this._eventData=[]}NWT.prototype={implement:function(a,b){var c={DelayableQueue:["wait",function(){function a(a){this.queue=[],this.context=a,this.inProgress=!1}return a.prototype={_add:function(a,b){var c=this;c.queue.push({type:"chain",func:a,args:b});if(!c.inProgress)return c._process()},_process:function(){var a=this,b;a.inProgress=!0;if(!a.queue.length)return;return b=a.queue.shift(),b.type=="wait"?setTimeout(function(){a._process()},b.duration*1e3):(a.context=b.func.apply(a.context,b.args),a._process()),a},wait:function(a){return this.queue.push({type:"wait",duration:a}),this}},function(b){var c=this,d=new a(c);getQueuedFunction=function(a){return function(){return d._add(a,arguments),d}};for(var e in c){if(typeof c[e]!="function"||e=="wait")continue;d[e]=getQueuedFunction(c[e])}return d.wait(b),d}}]};b[c[a][0]]=c[a][1]()}},window.nwt=window.n=new NWT,NWTIOResponse.prototype={toString:function(){return this.request.responseText}},NWTIO.prototype={_run:function(){var a=this;return this.req.onreadystatechange=function(){var b;a.req.readyState==4&&a.req.status==200?b="success":a.req.readyState==4&&(b="failure");if(b&&a.config[b]){var c=new NWTIOResponse(a.req);a.config[b](c)}},this.req.send(this.ioData?this.ioData:null),this},post:function(a,b){var c=!0;typeof a=="string"?this.ioData=a:typeof a=="object"&&a._node&&(a.getAttribute("enctype")&&(c=!1),this.ioData=new FormData(a._node));var d=this.req,b=b||"POST";return d.open(b,this.url),c&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this._run()},get:function(a){return a&&(this.url=this.url.split("?",1)[0]+"?"+a),this.req.open("GET",this.url),this._run()},put:function(a){return this.post("?"+a,"PUT")},"delete":function(a){return this.post("?"+a,"DELETE")},abort:function(){return this.req.abort(),this}},nwt.io=function(){return new NWTIO(arguments)},NWTNodeInstance.prototype={region:function(){var a={width:this.get("offsetWidth"),height:this.get("offsetHeight")},b=this._node.getBoundingClientRect(),c=document,d=c.documentElement,e=c.body,f=window,g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop||e.scrollTop,j=f.pageXOffset||d.scrollLeft||e.scrollLeft;return a.top=b.top+i-g,a.left=b.left+j-h,a.bottom=a.top+a.height,a.right=a.left+a.width,a},intersects:function(a){var b=this.region(),c=a.region();return!(b.left>c.right||b.right<c.left||b.top>c.bottom||b.bottom<c.top||c.left>b.right||c.right<b.left||c.top>b.bottom||c.bottom<b.top)},ancestor:function(a){var b=nwt.all(a),c=this._node,d=null,e=0;if(b.size()==0)return null;for(;;){b.each(function(a){a._node==c&&(d=a)});var f=c.parentNode;if(d||!f)break;c=f}return d?d:null},parent:function(){var a=new NWTNodeInstance(this._node.parentNode);return a},hasClass:function(a){return this._node.className&&this._node.className.indexOf(a)!==-1},addClass:function(a){return this.hasClass(a)||(this._node.className=this._node.className+" "+a),this},removeClass:function(a){return this.swapClass(a,"")},swapClass:function(a,b){return this._node.className=this._node.className.replace(a,b),this},data:function(a){return this._node.getAttribute("data-"+a)},setData:function(a,b){return this._node.setAttribute("data-"+a,b)},get:function(a){if(a==="parentNode"){var b=this._node[a];return b?new NWTNodeInstance(b):null}return this._node[a]},set:function(a,b){return this._node[a]=b,this},getAttribute:function(a){return this._node.getAttribute(a)},hasAttribute:function(a){return this._node.hasAttribute(a)},setAttribute:function(a,b){return this._node.setAttribute(a,b),this},_jsStyle:function(a){var b={"float":"cssFloat"};return b[a]&&(a=b[a]),a},getStyle:function(a){if(!this.getAttribute("style"))return"";a=this._jsStyle(a);var b=this._node.style[a];return b?b:null},removeStyle:function(a){return this.removeStyles(a)},removeStyles:function(a){typeof a=="string"&&(a=[a]);var b,c=a.length;for(b=0;b<c;b+=1)this._node.style[a[b]]="";return this},setStyle:function(a,b){var c={};return c[a]=b,this.setStyles(c)},setStyles:function(a){this.getAttribute("style")||this.setAttribute("style","");var b="",c={top:"px",left:"px",width:"px",height:"px"},d,e,f=[];for(d in a){var g=this._jsStyle(d);eachStyleVal=a[d],c[g]&&!isNaN(eachStyleVal)&&(eachStyleVal+=c[g]),this._node.style[g]=eachStyleVal}return this},serialize:function(){var a="",b=this._node.getElementsByTagName("*");for(var c=0,d;d=b[c];c++)if(!d.disabled&&d.name&&d.name.length>0)switch(d.tagName.toLowerCase()){case"input":switch(d.type){case"checkbox":case"radio":d.checked&&(a.length>0&&(a+="&"),a+=d.name+"="+encodeURIComponent(d.value));break;case"hidden":case"password":case"text":a.length>0&&(a+="&"),a+=d.name+"="+encodeURIComponent(d.value)}break;case"select":case"textarea":a.length>0&&(a+="&"),a+=d.name+"="+encodeURIComponent(d.value)}return a},getHtml:function(){return this._node.innerHTML},setHtml:function(html){var self=this,processScripts,scriptTags;return self._node.innerHTML=html,scriptTags=self.all("script"),processScripts=function(){var rawEl=scriptTags.nodes.shift();if(!rawEl||!rawEl._node)return;var scriptSrc=rawEl.getAttribute("src");if(scriptSrc){var newScript=document.createElement("script"),done;newScript.type="text/javascript",newScript.src=scriptSrc,newScript.onload=newScript.onreadystatechange=function(){!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(done=!0,processScripts())},self._node.appendChild(newScript)}else rawEl.get("text")&&(eval(rawEl.get("text")),processScripts())},processScripts(),this},val:function(){return this.get("value")},next:function(){var a=this._node;do a=a.nextSibling;while(a&&a.nodeType!=1);return new NWTNodeInstance(a)},previous:function(){var a=this._node;do a=a.previousSibling;while(a&&a.nodeType!=1);return new NWTNodeInstance(a)},one:function(a){var b=this._node.querySelector(a);return new NWTNodeInstance(b)},all:function(a){var b=this._node.querySelectorAll(a);return new NWTNodeList(b)},append:function(a){return a instanceof NWTNodeInstance&&(a=a._node),this._node.appendChild(a),this},appendTo:function(a){var b=a instanceof NWTNodeInstance?a:nwt.one(a);return b.append(this),this},insertTo:function(a,b){var c=a instanceof NWTNodeInstance?a:nwt.one(a);return c.insert(this,b),this},remove:function(){this._node.parentNode.removeChild(this._node)},insert:function(a,b){b=b||"before",b=="before"?this._node.parentNode.insertBefore(a._node,this._node):b=="after"&&this._node.parentNode.insertBefore(a._node,this.next()._node)},click:function(){var a=document.createEvent("MouseEvents");return a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),!this._node.dispatchEvent(a)}},NWTNode.prototype={create:function(a){var b=document.createElement("div");return b.innerHTML=a,new NWTNodeInstance(b.childNodes[0])},one:function(a){if(typeof a=="string"){var b=document.querySelectorAll(a);return b.length==0?null:new NWTNodeInstance(b[0])}return new NWTNodeInstance(a)},all:function(a){var b=document.querySelectorAll(a);return new NWTNodeList(b)}},nwt.node=new NWTNode,nwt.one=nwt.node.one,NWTNodeList.prototype={each:function(a){for(var b=0,c;c=this.nodes[b];b++)a(c)},item:function(a){return this.nodes[a]},size:function(){return this.nodes.length}},nwt.all=nwt.node.all;var pluginMap={};nwt.register=function(a){pluginMap[a.name]=a},nwt.plugin=function(a){var b=Array.prototype.slice.call(arguments),c,d=b.shift(),e=pluginMap[a],f=function(){},g;wrapPluginCall=function(a){var b;return e.extend&&(b=function(){pluginMap[e.extend].methods[a].apply(this,arguments)}),function(){return this._super=b,e.methods[a].apply(this,arguments)}};if(e.methods)for(c in e.methods)f.prototype[c]=wrapPluginCall(c);return g=new f,g.init.apply(g,b)},NWTNodeInstance.prototype.plug=function(a,b){return b=b||{},b.node=this,nwt.plugin(a,b)},NWTAnimate.prototype={init:function(a,b){nwt.one("#nwt-anim-styles")&&nwt.one("#nwt-anim-styles").remove();var c=nwt.node.create('<style type="text/css" id="nwt-anim-styles"></style>');b=b||"ease-in-out",a=a||1;var d=" "+a+"s "+b,e={"-webkit-transition":"all"+d,"-moz-transition":" all"+d,"-o-ransition":" all"+d,"ms-transition":" all"+d,transition:" all"+d},f=[],g="";for(i in e)f.push(i),g+=i+": "+e[i]+";";c.setHtml("."+this.animClass+"{"+g+"}"),nwt.one("head").append(c)},anim:function(a,b,c,d){return animation.init(c,d),a.addClass(animation.animClass),a.setStyles(b),a}};var animation=new NWTAnimate;nwt.anim=animation.anim,NWTNodeInstance.prototype.anim=function(a,b,c){return nwt.anim(this,a,b,c)},NWTEventInstance.prototype={code:function(){return this._e.keyCode},stop:function(){return this.noBubble().noDefault()},noDefault:function(){return this._e.preventDefault(),this},noBubble:function(){return this._e.stopPropagation(),this}},NWTEvent.prototype={live:function(a,b,c,d){var e=new RegExp(b),d=d||"click",f,g,h=nwt.one("body");d=="click"?f=100:f=1,g=function(d){var e=d.target,g=e,h=!0,i=0;while(g._node&&g._node.parentNode){if(g._node==nwt.one("body")._node||i>=f)break;if(g.hasAttribute(a)){var j=g.getAttribute(a).match(b);if(j){c(e,j),g.get("nodeName").toUpperCase()!=="INPUT"&&d.stop();break}}i++,g=g.parent()}return};var i=function(){h.on(d,g)};i();if(d!=="click"){var j=!1;nwt.one(document).on("scroll",function(){h.off(d,g),j&&(clearTimeout(j),j=!1),j=setTimeout(i,75)})}},_getEventCallback:function(a,b,c,d,e,f){var g=function(e){var g=new NWTEventInstance(e),h=arguments.callee,i=function(){nwt.event._eventData.unshift(g),c.apply(a,nwt.event._eventData),nwt.event._eventData=[],f&&a.removeEventListener(b,h)};if(d){a.all(d).each(function(a){a._node==g.target._node&&i()});return}i()};return this._cached[c.toString()]={fn:g},g},on:function(a,b,c,d,e,f){return this._cached[c.toString()]&&this.off.apply(this,arguments),a.addEventListener(b,this._getEventCallback.apply(this,arguments)),a},off:function(a,b,c){var d=c.toString();if(!this._cached[d]||!this._cached[d].fn)return;a.removeEventListener(b,this._cached[d].fn)},ready:function(a){var b=!1,c=!0,d=window,e=d.document,f=e.documentElement,g=e.addEventListener?"addEventListener":"attachEvent",h=e.addEventListener?"removeEventListener":"detachEvent",i=e.addEventListener?"":"on",j=function(c){if(c.type=="readystatechange"&&e.readyState!="complete")return;(c.type=="load"?d:e)[h](i+c.type,j,!1),!b&&(b=!0)&&a.call(d,c.type||c)},k=function(){try{f.doScroll("left")}catch(a){setTimeout(k,50);return}j("poll")};if(e.readyState=="complete")a.call(d,"lazy");else{if(e.createEventObject&&f.doScroll){try{c=!d.frameElement}catch(l){}c&&k()}e[g](i+"DOMContentLoaded",j,!1),e[g](i+"readystatechange",j,!1),d[g](i+"load",j,!1)}}},nwt.event=new NWTEvent,nwt.ready=nwt.event.ready,NWTNodeInstance.prototype.addEventListener=function(a,b){return this._node.addEventListener(a,b,!1)},NWTNodeInstance.prototype.removeEventListener=function(a,b){return this._node.removeEventListener(a,b,!1)},NWTNodeInstance.prototype.on=function(a,b,c,d){return nwt.event.on(this,a,b,c,d)},NWTNodeInstance.prototype.once=function(a,b,c,d){return nwt.event.on(this,a,b,c,d,!0)},NWTNodeInstance.prototype.off=function(a,b){return nwt.event.off(this,a,b)},NWTNodeInstance.prototype.fire=function(a,b){var c=Array.prototype.slice.call(arguments,1);nwt.event._eventData=c;var d=document.createEvent("UIEvents");d.initEvent(a,!0,!1),this._node.dispatchEvent(d)}})()